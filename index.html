<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="theme-color" content="#0ea5e9" />
  <meta name="description" content="Daily diabetes log PWA. Meals, medications, blood sugar, sleep, and chart with A4 export." />
  <link rel="manifest" href="manifest.webmanifest">
  <link rel="icon" href="icons/icon-192.png">
  <link rel="apple-touch-icon" href="icons/icon-192.png">
  <link rel="stylesheet" href="styles.css">
  <title>Diabetes Daily Log</title>
</head>
<body>
  <header class="app-header">
    <h1>Diabetes Daily Log</h1>
    <div class="status">
      <span id="netStatus" class="badge">Offline</span>
      <button id="installBtn" class="btn small" hidden>Install</button>
    </div>
  </header>

  <main>
    <section class="card">
      <h2>1) Select Day</h2>
      <div class="grid three">
        <label>Date
          <input id="dayDate" type="date" />
        </label>
        <label>Day (optional text)
          <input id="dayText" type="text" placeholder="Saturday / Week 2" />
        </label>
        </div>
      <div class="actions">
        <button id="copyPrev" class="btn secondary">Copy previous day</button>
        <button id="clearDay" class="btn danger">Clear day</button>
      </div>
      <small class="muted">Pick a date to load/save that day’s data.</small>
    </section>

    <section class="card">
      <h2>2) Meals</h2>
      <div class="actions">
        <button id="addMeal" class="btn">+ Add meal</button>
      </div>
      <ul id="mealsList" class="list"></ul>
      <template id="mealTpl">
        <li class="item meal">
          <div class="entry">
            <div class="grid three">
              <label>Kind
                <select class="meal-kind">
                  <option>Breakfast</option>
                  <option>Snack</option>
                  <option>Lunch</option>
                  <option>Snack (Afternoon)</option>
                  <option>Dinner</option>
                  <option>Other</option>
                </select>
              </label>
              <label>Time
                <input type="time" class="meal-time" />
              </label>
              <label>Details
                <input type="text" class="meal-desc" placeholder="100 g bread + 2 eggs + tea" />
              </label>
            </div>
          </div>
          <button class="del">Delete</button>
        </li>
      </template>
    </section>

    <section class="card">
      <h2>3) Medications</h2>
      <div class="actions">
        <button id="addMed" class="btn">+ Add medication</button>
      </div>
      <ul id="medsList" class="list"></ul>
      <template id="medTpl">
        <li class="item med">
          <div class="entry">
            <div class="grid two">
              <label>Time
                <input type="time" class="med-time" />
              </label>
              <label>Drugs &amp; dose
                <input type="text" class="med-desc" placeholder="18 Novorapid – 20 Regular – Sita-Met 12.5/1000" />
              </label>
            </div>
          </div>
          <button class="del">Delete</button>
        </li>
      </template>
    </section>

    <section class="card">
      <h2>4) Blood Sugar</h2>
      <div class="actions">
        <button id="addSugar" class="btn">+ Add custom reading</button>
        <button id="addTemplate" class="btn secondary">Use recommended times</button>
      </div>
      <ul id="sugarList" class="list"></ul>
      <template id="sugarTpl">
        <li class="item sugar">
          <div class="entry">
            <div class="grid three">
              <label>Label
                <input type="text" class="sugar-label" placeholder="Fasting / After BF 2h / ..." />
              </label>
              <label>Time
                <input type="time" class="sugar-time" />
              </label>
              <label>Value
                <input type="number" min="10" max="1000" inputmode="decimal" class="sugar-value" placeholder="mg/dL or mmol/L" />
              </label>
            </div>
            <small class="muted warn"></small>
          </div>
          <button class="del">Delete</button>
        </li>
      </template>
      <small class="muted">Recommended: Fasting (after wake), 2h after breakfast, 12:00, 18:00, Before sleep.</small>
    </section>

    <section class="card">
      <h2>5) Sleep</h2>
      <div class="grid two">
        <label>Wake time
          <input id="wakeTime" type="time" />
        </label>
        <label>Bed time
          <input id="sleepTime" type="time" />
        </label>
      </div>
    </section>

    <section class="card">
      <h2>6) Daily Chart</h2>
      <canvas id="chart" width="1100" height="520" class="chart"></canvas>
      <div class="actions">
        <button id="redraw" class="btn secondary">Redraw Chart</button>
        <button id="exportA4" class="btn">Export A4 (Landscape)</button>
      </div>
      <small class="muted">Shaded band = 70–180 mg/dL target range.</small>
    </section>

    <section class="card">
      <h2>8) Daily Rules</h2>
      <ul>
        <li>Before <b>09:00</b> — eat breakfast and take diabetes medications.</li>
        <li>Before <b>14:00</b> — eat lunch and take diabetes medications.</li>
        <li>Before <b>21:00</b> — eat dinner and take diabetes medications.</li>
      </ul>
    </section>
  </main>

  <footer>
    <small>Works offline after first load. You can install it: open menu ⋮ → <b>Install app</b> (Android Chrome).</small>
  </footer>

  <script src="app.js" defer></script>
</body>
</html>
